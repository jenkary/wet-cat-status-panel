<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wet Cat Status Panel</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
    body {
      font-family: 'Press Start 2P', cursive;
      background: #e0e0e0;
      color: #222;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      position: relative;
      user-select: none;
      transition: background 0.5s, color 0.5s;
    }
    body.night {
      background: #0b0d17;
      color: #cbd5e1;
    }
    h1 {
      margin-bottom: 1rem;
      position: relative;
    }
    #sky-icon {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      font-size: 2rem;
      user-select: none;
    }
    #stars-container {
      position: absolute;
      top: 2.5rem;
      width: 100%;
      height: 100px;
      pointer-events: none;
      display: none;
      overflow: visible;
    }
    .star {
      position: absolute;
      opacity: 0.8;
      font-size: 0.8rem;
      animation: twinkle 2s infinite alternate;
      color: #99ccff;
    }
    @keyframes twinkle {
      from { opacity: 0.2; transform: scale(1); }
      to   { opacity: 1; transform: scale(1.3); }
    }
    .emoticat {
      font-size: 2rem;
      font-family: 'Courier New', monospace;
      min-height: 2.5rem;
      margin: 1rem 0;
    }
    .mood {
      font-size: 0.8rem;
      height: 1.2rem;
      white-space: nowrap;
      overflow: hidden;
      margin-bottom: 1rem;
    }
    .meter {
      width: 200px;
      height: 20px;
      background: #ccc;
      border: 2px solid #000;
      box-shadow: inset 2px 2px #888;
      margin-bottom: 1rem;
    }
    .meter-fill {
      height: 100%;
      width: 0;
      transition: width 0.3s, background 0.5s;
    }
    .comfort-container {
      margin: 1rem 0;
      text-shadow: 1px 1px #fff;
    }
    #comfort-bar {
      font-size: 1.2rem;
    }
    button {
      font-family: 'Press Start 2P', cursive;
      font-size: 0.6rem;
      padding: 10px 16px;
      margin: 5px;
      background: #fff;
      border: 2px solid #000;
      box-shadow: 4px 4px #888;
      cursor: pointer;
      transition: transform 0.1s;
    }
    button:active {
      transform: translate(2px,2px);
      box-shadow:2px 2px #555;
    }
    button:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }
    .floof-flake, #drizzle { position: absolute; pointer-events: none; user-select: none; }
    .floof-flake {
      font-size: 1.4rem;
      color: #7ec8f5;
      animation: snowFloat 1.5s ease-out forwards;
    }
    @keyframes snowFloat {
      to { transform: translateY(-60px) scale(1.4) rotate(15deg); opacity: 0.5; }
    }
    #drizzle {
      top:90px;
      font-size:1.6rem;
      color:#7ec8f5;
      letter-spacing:6px;
      animation: drizzleFall 3s linear infinite;
    }
    @keyframes drizzleFall {
      to { transform: translateY(30px); opacity:0; }
    }
    #cloud, #sun, #moon {
      position: absolute;
      top:40px;
      left:50%;
      transform: translateX(-50%);
      font-size:3rem;
      transition: opacity 1s;
    }
    #cloud { color: #b0c4de; }
    #sun { color: #f2d024; opacity: 0; }
    #moon { color: #99ccff; top: 120px; opacity: 0; }
  </style>
</head>
<body>
  <h1>üêæ wet cat status panel <span id="sky-icon">‚òÅÔ∏é</span></h1>
  <div id="stars-container"></div>
  <div class="emoticat" id="cat">(Ôºø Ôºø ) ‚≥ä</div>
  <div class="mood" id="mood">deflated blob + feeling alone</div>
  <div class="meter"><div class="meter-fill" id="meter-fill"></div></div>
  <div class="comfort-container">
    comfort‚Äëo‚Äëmeter:<br><div id="comfort-bar"></div>
  </div>
  <div>
    <button id="floof-btn">üß∫ floof with towel</button>
    <button id="pat-btn">„Å§(‚Ä¢Àï ‚Ä¢„Éû.·êü pat pat</button>
    <button id="bath-btn" disabled>ü´ß bubble bath</button>
    <button id="sleep-btn" disabled>üõèÔ∏è eepy cat</button>
  </div>
  <p id="counter">towel count: 0</p>
  <div id="cloud">‚òÅÔ∏é</div>
  <div id="drizzle">Ôæü‚ãÜ Ôæü‚ãÜ Ôæü‚ãÜ</div>
  <div id="sun">‚òº</div>
  <div id="moon">‚èæ</div>
  <audio id="click" src="click.mp3"></audio>
  <audio id="mlem" src="mlem.mp3"></audio>

  <script>
    const stages = [
      {e:"(Ôºø Ôºø ) ‚≥ä", m:"deflated blob"},
      {e:"/·ê†; ^ ;„Éû‚≥ä", m:"soggy baby"},
      {e:"/·ê†ÔΩ°‚Ä∏ÔΩ°„Éû‚üÜ", m:"misty but trying"},
      {e:"‚âΩ^- Àï -^‚âº", m:"neutral puddle cat"},
      {e:"‚âΩ^‚Ä¢Àï‚Ä¢ ‡æÄ‡Ω≤‚âº", m:"polite dry floof"},
      {e:"‚Çç^‚Ä¢‚©ä‚Ä¢^‚Çé‚üÜ ‚ÇäÀö‚äπ üçû", m:"CRISPY BAKED LOAF"}
    ];
    let towels=0, pats=0, bubble=false, asleep=false;
    const maxP=10, maxT=50;
    const rainbow=['#F00','#F70','#FF0','#0F0','#00F','#70F','#F0F'];

    const btns = {
      floof: document.getElementById('floof-btn'),
      pat: document.getElementById('pat-btn'),
      bath: document.getElementById('bath-btn'),
      sleep: document.getElementById('sleep-btn')
    };
    const cat = document.getElementById('cat'),
          mood = document.getElementById('mood'),
          meter = document.getElementById('meter-fill'),
          conf = document.getElementById('comfort-bar'),
          ctr = document.getElementById('counter'),
          skyI = document.getElementById('sky-icon'),
          cloud = document.getElementById('cloud'),
          drizzle = document.getElementById('drizzle'),
          sun = document.getElementById('sun'),
          moon = document.getElementById('moon'),
          stars = document.getElementById('stars-container');
    const click = document.getElementById('click'),
          mlem = document.getElementById('mlem');

    function tone() {
      if(pats<4) return "feeling alone";
      if(pats<8) return "gently comforted";
      return "filled with determination!";
    }

    function createStars() {
      stars.innerHTML = '';
      for(let i=0; i<30; i++){
        const s = document.createElement('div');
        s.className='star';
        s.style.left = Math.random()*100+'%';
        s.style.top  = Math.random()*100+'px';
        stars.appendChild(s);
        s.textContent = ["‚ú¶","‚ú©","‚ú™","‚ú´","‚ú¨"][i%5];
      }
    }
    createStars();

    function updateSky() {
      const pT = Math.min(towels/maxT,1), pP = pats/maxP;
      const cloudy = (!asleep && (!bubble || pT<1));
      const sunny = (!asleep && bubble && pT===1 && pP===1);
      const night = asleep;

      cloud.style.opacity = cloudy?1:0;
      drizzle.style.opacity = cloudy?1:0;
      drizzle.style.display = cloudy?'block':'none';
      drizzle.style.animationDuration = `${3-pT*2}s`;
      sun.style.opacity = sunny?1:0;
      moon.style.opacity = night?1:0;
      skyI.textContent = night?'‚èæ':(cloudy?'‚òÅÔ∏é':'‚òº');
      stars.style.display = night?'block':'none';
      document.body.classList.toggle('night', night);
    }

    function updateMeter() {
      const p = Math.min(towels/maxT,1);
      meter.style.width = p*100+'%';
      meter.style.background = p<0.5
        ? `rgb(255,${Math.round(p/0.5*255)},0)`
        : `rgb(${Math.round(255-(p-0.5)/0.5*255)},255,0)`;
    }

    function updateComfort() {
      conf.innerHTML='';
      for(let i=0;i<pats;i++){
        const sp = document.createElement('span');
        sp.textContent='‚ô•';
        sp.style.color = pats===maxP ? rainbow[i%rainbow.length] : '#e63946';
        conf.appendChild(sp);
      }
      for(let i=pats;i<maxP;i++){
        const sp = document.createElement('span');
        sp.textContent='‚ô°';
        sp.style.color = '#555';
        conf.appendChild(sp);
      }
    }

    function updateMood() {
      if(asleep){
        cat.textContent='(„Å£‚∏ç‚∏å- ‚Ä∏ - ‚∏ç‚∏å)„Å§üß∏';
        mood.textContent = "dreaming peacefully";
        btns.sleep.textContent = '‚òÄÔ∏è wake up, wet cat!';
      }
      else if(bubble){
        cat.textContent='ü´ß Íí∞^‚Ä¢‚©ä‚Ä¢^Íí± ‚äπÀöüõÅ';
        mood.textContent = `fresh and bubbly + ${tone()}`;
        btns.sleep.textContent = 'üõèÔ∏è eepy cat';
      }
      else {
        const st = stages[Math.min(towels/10,5)|0];
        cat.textContent = st.e;
        mood.textContent = `${st.m} + ${tone()}`;
        btns.sleep.textContent = 'üõèÔ∏è eepy cat';
      }
    }

    function updateAll() {
      updateMood();
      updateMeter();
      updateComfort();
      updateSky();
      ctr.textContent = `towel count: ${towels}`;
      btns.bath.disabled = !(towels>=maxT && pats>=maxP);
      btns.sleep.disabled = !(bubble && towels>=maxT && pats>=maxP);
    }

    btns.floof.onclick = e => {
      if(asleep) return;
      click.currentTime=0; click.play();
      if(towels < maxT) {
        towels++;
        const f = document.createElement('div');
        f.className='floof-flake';
        f.textContent='‚ùÑ';
        document.body.appendChild(f);
        f.style.left = e.clientX+(Math.random()*40-20)+'px';
        f.style.top = e.clientY+(Math.random()*20-10)+'px';
        setTimeout(()=>f.remove(),1200);
      }
      updateAll();
    };

    btns.pat.onclick = () => {
      if(asleep || pats>=maxP) return;
      click.currentTime=0; click.play();
      pats++;
      if(pats===maxP) { mlem.currentTime=0; mlem.play(); }
      updateAll();
    };

    btns.bath.onclick = () => {
      if(asleep || btns.bath.disabled) return;
      click.currentTime=0; click.play();
      bubble = true;
      // Add bubble emojis on click
      for(let i=0; i<15; i++){
        const b = document.createElement('div');
        b.textContent='ü´ß';
        b.style.position='absolute';
        b.style.left = window.innerWidth/2 + (Math.random()*200-100)+'px';
        b.style.top  = window.innerHeight/2 + (Math.random()*200-100)+'px';
        b.style.opacity=1;
        b.style.transition='opacity 1s';
        document.body.appendChild(b);
        setTimeout(()=>b.remove(),1000);
      }
      updateAll();
    };

    btns.sleep.onclick = () => {
      if(btns.sleep.disabled) return;
      click.currentTime=0; click.play();
      asleep = !asleep;
      updateAll();
    };

    updateAll();
  </script>
</body>
</html>

