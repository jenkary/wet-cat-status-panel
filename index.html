<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Wet Cat Status Panel - Day & Night Mode</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

  body {
    font-family: 'Press Start 2P', cursive;
    background-color: #e0e0e0;
    color: #222;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    padding: 2rem;
    text-align: center;
    user-select: none;
    position: relative;
    overflow: hidden;
    transition: background-color 0.8s ease, color 0.8s ease;
  }

  body.night {
    background-color: #0b0d17;
    color: #cbd5e1;
  }

  h1 {
    font-size: 1.2rem;
    margin-bottom: 1.5rem;
    position: relative;
  }

  #sky-icon {
    font-size: 2rem;
    position: absolute;
    top: 0.2rem;
    left: 50%;
    transform: translateX(-50%);
    user-select: none;
  }

  /* Stars container */
  #stars-container {
    position: absolute;
    top: 2.5rem;
    left: 0;
    width: 100%;
    height: 100px;
    pointer-events: none;
    overflow: visible;
    display: none; /* hidden by default */
  }

  .star {
    position: absolute;
    color: #fff;
    opacity: 0.8;
    font-size: 0.8rem;
    animation: twinkle 2s infinite ease-in-out alternate;
  }

  .star:nth-child(2n) {
    animation-duration: 3s;
    opacity: 0.5;
  }

  @keyframes twinkle {
    0% { opacity: 0.2; transform: scale(1); }
    100% { opacity: 1; transform: scale(1.3); }
  }

  .emoticat {
    font-size: 2rem;
    margin: 1rem 0;
    min-height: 2.5rem;
    font-family: 'Courier New', monospace;
  }

  .mood {
    font-size: 0.8rem;
    margin-bottom: 1rem;
    height: 1.2rem; /* fixed height to prevent overlap */
    white-space: nowrap;
    overflow: hidden;
    line-height: 1.2rem;
    user-select: none;
  }

  .meter {
    width: 200px;
    height: 20px;
    background: #ccc;
    border: 2px solid #000;
    box-shadow: inset 2px 2px 0 #888;
    margin-bottom: 1rem;
    position: relative;
    border-radius: 3px;
  }

  .meter-fill {
    height: 100%;
    width: 0%;
    border-radius: 1px;
    transition: width 0.3s ease, background-color 0.5s ease;
    background: red;
  }

  .comfort-container {
    margin: 1rem 0;
    font-family: 'Press Start 2P', cursive;
    font-size: 1rem;
    line-height: 1.5;
    letter-spacing: 2px;
    text-shadow: 1px 1px 0 #fff;
  }

  .comfort-label {
    font-size: 0.6rem;
    margin-bottom: 0.3rem;
  }

  #comfort-bar {
    font-size: 1.2rem;
    color: #e63946;
  }

  button {
    background: #fff;
    color: #000;
    border: 2px solid #000;
    box-shadow: 4px 4px 0 #888;
    padding: 10px 16px;
    font-family: 'Press Start 2P', cursive;
    font-size: 0.6rem;
    cursor: pointer;
    margin: 5px 8px;
    user-select: none;
    transition: transform 0.1s, box-shadow 0.1s;
    border-radius: 0;
    position: relative;
    z-index: 10;
  }

  button:active {
    box-shadow: 2px 2px 0 #555;
    transform: translate(2px, 2px);
  }

  button:disabled {
    opacity: 0.4;
    cursor: not-allowed;
  }

  .pat-text {
    position: absolute;
    font-family: 'Press Start 2P', cursive;
    font-size: 0.7rem;
    color: #ff69b4;
    user-select: none;
    pointer-events: none;
    animation: floatUpFade 1s ease forwards;
    font-weight: bold;
    text-shadow: 1px 1px 2px #fff;
    z-index: 20;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .paw-print {
    width: 48px;
    height: 48px;
    image-rendering: pixelated;
    transform: scale(2);
  }

  @keyframes floatUpFade {
    0% {
      opacity: 1;
      transform: translateY(0);
    }
    100% {
      opacity: 0;
      transform: translateY(-40px);
    }
  }

  .floof-flake {
    position: absolute;
    font-size: 1.4rem;
    color: #bdf;
    opacity: 1;
    animation: snowFloat 1.5s ease-out forwards;
    pointer-events: none;
    user-select: none;
    z-index: 30;
  }

  @keyframes snowFloat {
    0% {
      transform: translateY(0) scale(1);
      opacity: 1;
    }
    100% {
      transform: translateY(-60px) scale(1.4) rotate(15deg);
      opacity: 0.5;
    }
  }
  /* Drizzle styles */
  #drizzle {
    position: absolute;
    top: 90px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 1.6rem;
    color: #7ec8f5; /* light blue drizzle */
    user-select: none;
    pointer-events: none;
    letter-spacing: 6px;
    animation: drizzleFall 3s linear infinite;
    z-index: 15;
  }

  @keyframes drizzleFall {
    0% { transform: translateX(-50%) translateY(0); opacity: 1; }
    100% { transform: translateX(-50%) translateY(30px); opacity: 0; }
  }

  #cloud {
    position: absolute;
    top: 40px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 3rem;
    color: #b0c4de;
    user-select: none;
    pointer-events: none;
    transition: transform 2s ease, opacity 2s ease;
    z-index: 20;
    will-change: transform, opacity;
  }

  #moon {
    position: absolute;
    top: 120px; /* pushed down to avoid overlap */
    left: 50%;
    transform: translateX(-50%);
    font-size: 3rem;
    color: #99ccff;
    user-select: none;
    pointer-events: none;
    opacity: 0;
    transition: opacity 2s ease;
    z-index: 19; /* behind cloud */
    will-change: opacity;
  }

  #sun {
    position: absolute;
    top: 40px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 3rem;
    color: #f2d024; /* bright yellow sun */
    user-select: none;
    pointer-events: none;
    opacity: 0;
    transition: opacity 2s ease;
    z-index: 20;
  }

  /* Responsive */
  @media (max-width: 400px) {
    .emoticat {
      font-size: 1.6rem;
    }
    button {
      font-size: 0.5rem;
      padding: 8px 12px;
    }
    .meter {
      width: 150px;
    }
    #cloud, #sun, #moon {
      font-size: 2rem;
      top: 30px;
    }
    #drizzle {
      top: 70px;
      font-size: 1.2rem;
      letter-spacing: 4px;
    }
  }
</style>
</head>
<body>

  <h1>üêæ wet cat status panel <span id="sky-icon">‚òÅÔ∏é</span></h1>
  <div id="stars-container"></div>

  <div class="emoticat" id="cat">(Ôºø Ôºø ) ‚≥ä</div>
  <div class="mood" id="mood">mood: deflated blob + feeling alone</div>

  <div class="meter">
    <div class="meter-fill" id="meter-fill"></div>
  </div>

  <div class="comfort-container">
    <div class="comfort-label">comfort-o-meter:</div>
    <div id="comfort-bar"></div>
  </div>

  <div>
    <button id="floof-btn" onclick="floofCat(event)">üß∫ floof with towel</button>
    <button id="pat-btn" onclick="patPat(event)">„Å§(‚Ä¢Àï ‚Ä¢„Éû.·êü pat pat</button>
    <button id="bath-btn" onclick="bubbleBath()" style="margin-left:20px;">ü´ß bubble bath</button>
    <button id="sleep-toggle" onclick="toggleSleep()" disabled>·∂ª ùóì ê∞Å eepy cat</button>
  </div>

  <p id="counter">towel count: 0</p>

  <div id="cloud">‚òÅÔ∏é</div>
  <div id="drizzle">Ôæü‚ãÜ Ôæü‚ãÜ Ôæü‚ãÜ Ôæü‚ãÜ Ôæü‚ãÜ</div>
  <div id="sun">‚òº</div>
  <div id="moon">‚èæ</div>

<script>
  // Emoticon stages
  const stages = [
    { emoticon: "(Ôºø Ôºø ) ‚≥ä", mood: "deflated blob", max: 5 },
    { emoticon: "/·ê†; ^ ;„Éû‚≥ä", mood: "soggy baby", max: 15 },
    { emoticon: "/·ê†ÔΩ°‚Ä∏ÔΩ°„Éû‚üÜ", mood: "misty but trying", max: 25 },
    { emoticon: "‚âΩ^- Àï -^‚âº", mood: "neutral puddle cat", max: 35 },
    { emoticon: "‚âΩ^‚Ä¢Àï‚Ä¢ ‡æÄ‡Ω≤‚âº", mood: "polite dry floof", max: 45 },
    { emoticon: "‚Çç^‚Ä¢‚©ä‚Ä¢^‚Çé‚üÜ ‚ÇäÀö‚äπ üçû", mood: "CRISPY BAKED LOAF", max: Infinity },
  ];

  let towelCount = 0;
  let patCount = 0;
  let isBlinking = false;
  let isBubbleBath = false;
  let isSleeping = false;

  const maxComfortHearts = 10;
  const rainbowColors = ['#FF0000', '#FF7F00', '#FFFF00', '#00FF00', '#0000FF', '#4B0082', '#8B00FF'];

  const catElem = document.getElementById('cat');
  const moodElem = document.getElementById('mood');
  const meterFill = document.getElementById('meter-fill');
  const comfortBar = document.getElementById('comfort-bar');
  const counterElem = document.getElementById('counter');
  const skyIcon = document.getElementById('sky-icon');
  const cloud = document.getElementById('cloud');
  const drizzle = document.getElementById('drizzle');
  const sun = document.getElementById('sun');
  const moon = document.getElementById('moon');
  const starsContainer = document.getElementById('stars-container');
  const sleepToggleBtn = document.getElementById('sleep-toggle');
  const bathBtn = document.getElementById('bath-btn');

  function getCurrentStage() {
    return stages.find(stage => towelCount <= stage.max);
  }

  function getTone() {
    if (patCount < 4) return "feeling alone";
    if (patCount < 8) return "gently comforted";
    return "filled with determination!";
  }

  function updateDisplay(emoticon, baseMood) {
    if (isSleeping) {
      catElem.textContent = '(„Å£‚∏ç‚∏å- ‚Ä∏ - ‚∏ç‚∏å)„Å§üß∏';
      moodElem.textContent = "sleepy and cozy + filled with determination!";

      drizzle.style.display = 'none';
      cloud.style.opacity = 0;
      sun.style.opacity = 0;

      moon.style.opacity = 1;

      skyIcon.textContent = "‚èæ";
      starsContainer.style.display = 'block';
      document.body.classList.add('night');
    } else if (isBubbleBath) {
      catElem.textContent = 'ü´ß Íí∞^‚Ä¢‚©ä‚Ä¢^Íí± ‚äπÀöüõÅ';
      moodElem.textContent = "fresh and bubbly + " + getTone();

      drizzle.style.display = 'block';
      sun.style.opacity = 0;

      cloud.style.opacity = 1;
      moon.style.opacity = 0;

      skyIcon.textContent = "‚òÅÔ∏é";
      starsContainer.style.display = 'none';
      document.body.classList.remove('night');
    } else {
      catElem.textContent = emoticon;
      moodElem.textContent = `${baseMood} + ${getTone()}`;

      const drynessRatio = Math.min(towelCount / 50, 1);
      const comfortRatio = Math.min(patCount / maxComfortHearts, 1);

      drizzle.style.opacity = Math.max(0, 1 - drynessRatio - comfortRatio * 0.5);
      drizzle.style.display = drizzle.style.opacity > 0.1 ? "block" : "none";
      drizzle.style.animationDuration = `${3 - drynessRatio * 2}s`;

      cloud.style.opacity = drizzle.style.opacity;
      cloud.style.transform = `translateX(${(1 - drynessRatio - comfortRatio * 0.5) * 100}px)`;

      sun.style.opacity = drynessRatio > 0.8 ? 1 : 0;

      moon.style.opacity = 0;

      skyIcon.textContent = cloud.style.opacity > 0.2 ? "‚òÅÔ∏é" : (sun.style.opacity > 0 ? "‚òº" : "‚òÅÔ∏é");
      starsContainer.style.display = 'none';
      document.body.classList.remove('night');
    }

    const fillPercent = Math.min(towelCount / 50, 1) * 100;
    meterFill.style.width = `${fillPercent}%`;
    if (fillPercent < 50) {
      const greenVal = Math.round((fillPercent / 50) * 255);
      meterFill.style.backgroundColor = `rgb(255, ${greenVal}, 0)`;
    } else {
      const redVal = Math.round(255 - ((fillPercent - 50) / 50) * 255);
      meterFill.style.backgroundColor = `rgb(${redVal}, 255, 0)`;
    }
    counterElem.textContent = `towel count: ${towelCount}`;

    // enable sleep toggle only if bubble bath done and towel + pats are full
    sleepToggleBtn.disabled = !(isBubbleBath && towelCount >= 50 && patCount >= maxComfortHearts);
  }

  function updateComfortBar() {
    comfortBar.innerHTML = "";

    const filled = Math.min(patCount, maxComfortHearts);
    const empty = maxComfortHearts - filled;

    for (let i = 0; i < filled; i++) {
      const heart = document.createElement("span");
      heart.className = "heart";
      heart.textContent = "‚ô•";
      heart.style.color = (filled === maxComfortHearts) ? rainbowColors[i % rainbowColors.length] : "#e63946";
      comfortBar.appendChild(heart);
    }

    for (let i = 0; i < empty; i++) {
      const heart = document.createElement("span");
      heart.className = "heart";
      heart.textContent = "‚ô°";
      heart.style.color = "#555";
      comfortBar.appendChild(heart);
    }
  }

  function createStars() {
    starsContainer.innerHTML = "";
    const starCount = 25;
    for(let i = 0; i < starCount; i++) {
      const star = document.createElement('div');
      star.className = 'star';
      star.style.left = `${Math.random() * 100}%`;
      star.style.top = `${Math.random() * 100}px`;
      star.style.animationDelay = `${Math.random() * 2}s`;
      starsContainer.appendChild(star);
      star.textContent = ["‚ú¶", "‚ú©", "‚ú™", "‚ú´", "‚ú¨"][Math.floor(Math.random() * 5)];
    }
  }

  function floofCat(event) {
    if (isBlinking || isSleeping) return;
    towelCount++;
    const stage = getCurrentStage();
    updateDisplay(stage.emoticon, stage.mood);

    const flake = document.createElement("div");
    flake.className = "floof-flake";
    flake.textContent = "‚ùÑ";
    const x = event.clientX + (Math.random() * 40 - 20);
    const y = event.clientY + (Math.random() * 20 - 10);
    flake.style.left = `${x}px`;
    flake.style.top = `${y}px`;
    document.body.appendChild(flake);
    setTimeout(() => flake.remove(), 1200);

    updateComfortBar();
  }

  function patPat() {
    if (isBlinking || isSleeping) return;
    if (patCount >= maxComfortHearts) return;
    patCount++;
    updateDisplay(getCurrentStage().emoticon, getCurrentStage().mood);
    updateComfortBar();

    // show +1 pat floating text
    const patText = document.createElement("div");
    patText.className = "pat-text";
    patText.style.left = `${window.innerWidth / 2 + (Math.random() * 80 - 40)}px`;
    patText.style.top = `180px`;
    patText.textContent = "pat +1 „Å§";
    document.body.appendChild(patText);
    setTimeout(() => patText.remove(), 1000);
  }

  function bubbleBath() {
    if (isSleeping) return;
    isBubbleBath = true;
    towelCount = 50;
    patCount = maxComfortHearts;
    updateDisplay('ü´ß Íí∞^‚Ä¢‚©ä‚Ä¢^Íí± ‚äπÀöüõÅ', "fresh and bubbly");
    updateComfortBar();
  }

  function toggleSleep() {
    if (!(isBubbleBath && towelCount >= 50 && patCount >= maxComfortHearts)) return;
    isSleeping = !isSleeping;
    updateDisplay(
      isSleeping ? '(„Å£‚∏ç‚∏å- ‚Ä∏ - ‚∏ç‚∏å)„Å§üß∏' : getCurrentStage().emoticon,
      isSleeping ? "sleepy and cozy" : getCurrentStage().mood
    );
  }

  // Init
  updateDisplay(getCurrentStage().emoticon, getCurrentStage().mood);
  updateComfortBar();
  createStars();

</script>

</body>
</html>

